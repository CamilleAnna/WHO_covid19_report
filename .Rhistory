mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`))
d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
na_if(is.element(c('Inf', '-Inf'))
)
d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
na_if(is.element(c('Inf', '-Inf')))
d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
na_if(`log10_d.10k.-7`, c('Inf', '-Inf'))
d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
na_if(`log10_d.10k.-7`, 'Inf')
d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
na_if('Inf')
d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`))
foo1<- d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`))
who_dt_data
foo1<- d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country')
foo1
foo1<- d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.log10_d.10k.today = `log10_d.10k.-7` + ((7*log10(2))/Dt_cases))
d.10k.today.and.todayMinus7
d.10k.today.and.todayMinus7[2,] %>%
gather('country', 'cases.10k.today', 2:ncol(.)) %>%
mutate(`obs.log10_d.10k.today` = log10(cases.10k.today))
y2.obs<- d.10k.today.and.todayMinus7[2,] %>%
gather('country', 'cases.10k.today', 2:ncol(.)) %>%
mutate(`obs.log10_d.10k.today` = log10(cases.10k.today)) %>%
select(country, obs.log10_d.10k.today)
y1.dt.y2Pred<- d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.log10_d.10k.today = `log10_d.10k.-7` + ((7*log10(2))/Dt_cases)) %>%
left_join(y2.obs, "country")
y1.dt.y2Pred
y1.dt.y2Pred<- d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.log10_d.10k.today = `log10_d.10k.-7` + ((7*log10(2))/Dt_cases)) #%>%
y1.dt.y2Pred
d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.log10_d.10k.today = `log10_d.10k.-7` + ((7*log10(2))/Dt_cases)) %>%
#left_join(y2.obs, "country")
select(country, `log10_d.10k.-7`, pred.log10_d.10k.today)
d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.log10_d.10k.today = `log10_d.10k.-7` + ((7*log10(2))/Dt_cases)) %>%
#left_join(y2.obs, "country")
select(country, `log10_d.10k.-7`, pred.log10_d.10k.today) %>%
spread(country,`log10_d.10k.-7`)
d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.log10_d.10k.today = `log10_d.10k.-7` + ((7*log10(2))/Dt_cases)) %>%
#left_join(y2.obs, "country")
select(country, `log10_d.10k.-7`, pred.log10_d.10k.today) %>%
spread(country,c(`log10_d.10k.-7`, pred.log10_d.10k.today))
d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.log10_d.10k.today = `log10_d.10k.-7` + ((7*log10(2))/Dt_cases)) %>%
#left_join(y2.obs, "country")
select(country, `log10_d.10k.-7`, pred.log10_d.10k.today)
d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.log10_d.10k.today = `log10_d.10k.-7` + ((7*log10(2))/Dt_cases)) %>%
#left_join(y2.obs, "country")
select(country, `log10_d.10k.-7`, pred.log10_d.10k.today) %>%
gather('time','y1.or.y2', 2:3)
d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.log10_d.10k.today = `log10_d.10k.-7` + ((7*log10(2))/Dt_cases)) %>%
#left_join(y2.obs, "country")
select(country, `log10_d.10k.-7`, pred.log10_d.10k.today) %>%
gather('time','y1.or.y2', 2:3) %>%
spread(country, y1.or.y2)
d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.log10_d.10k.today = `log10_d.10k.-7` + ((7*log10(2))/Dt_cases)) %>%
#left_join(y2.obs, "country")
select(country, `log10_d.10k.-7`, pred.log10_d.10k.today) %>%
gather('time','y1.or.y2', 2:3) %>%
spread(country, y1.or.y2) %>%
mutate(date = ifelse(time == 'log10_d.10k.-7', as.Date(today - 7), as.Date(today)))
as.Date(today - 7)
d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.log10_d.10k.today = `log10_d.10k.-7` + ((7*log10(2))/Dt_cases)) %>%
#left_join(y2.obs, "country")
select(country, `log10_d.10k.-7`, pred.log10_d.10k.today) %>%
gather('time','y1.or.y2', 2:3) %>%
spread(country, y1.or.y2) %>%
mutate(date = ifelse(time == 'log10_d.10k.-7', today - 7, today))
d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.log10_d.10k.today = `log10_d.10k.-7` + ((7*log10(2))/Dt_cases)) %>%
#left_join(y2.obs, "country")
select(country, `log10_d.10k.-7`, pred.log10_d.10k.today) %>%
gather('time','y1.or.y2', 2:3) %>%
spread(country, y1.or.y2) %>%
mutate(date = ifelse(time == 'log10_d.10k.-7', as.character(today - 7), as.character(today)))
d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.log10_d.10k.today = `log10_d.10k.-7` + ((7*log10(2))/Dt_cases)) %>%
#left_join(y2.obs, "country")
select(country, `log10_d.10k.-7`, pred.log10_d.10k.today) %>%
gather('time','y1.or.y2', 2:3) %>%
spread(country, y1.or.y2) %>%
mutate(time = ifelse(time == 'log10_d.10k.-7', as.character(today - 7), as.character(today)))
d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.log10_d.10k.today = `log10_d.10k.-7` + ((7*log10(2))/Dt_cases)) %>%
#left_join(y2.obs, "country")
select(country, `log10_d.10k.-7`, pred.log10_d.10k.today) %>%
gather('time','y1.or.y2', 2:3) %>%
spread(country, y1.or.y2) %>%
mutate(time = ifelse(time == 'log10_d.10k.-7', as.character(today - 7), as.character(today))) %>%
rename(date = time)
y1.dt.y2Pred<- d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.log10_d.10k.today = `log10_d.10k.-7` + ((7*log10(2))/Dt_cases)) %>%
#left_join(y2.obs, "country")
select(country, `log10_d.10k.-7`, pred.log10_d.10k.today) %>%
gather('time','y1.or.y2', 2:3) %>%
spread(country, y1.or.y2) %>%
mutate(time = ifelse(time == 'log10_d.10k.-7', as.character(today - 7), as.character(today))) %>%
rename(date = time)
y1.dt.y2Pred %>%
gather('country', 'n', 2:ncol(.))
y1.dt.y2Pred %>%
gather('country', 'n', 2:ncol(.)) %>%
group_by(country) %>%
mutate(log10increase.7days = n/n[1])
test<- y1.dt.y2Pred %>%
gather('country', 'n', 2:ncol(.)) %>%
group_by(country) %>%
mutate(log10increase.7days = n/n[1])
ggplot(test, aes(x = as.factor(date), y = log10increase.7days, group = country))+
geom_line(col = 'grey') + ggtitle('Angola')+
geom_line(data = test[test$country == 'Angola',], size = 1.5)+
geom_point(data = test[test$country == 'Angola',], size = 1.8)+
ylab('Log10 increase over the past 7 days\n')+ xlab('')+
scale_y_continuous(breaks = log10(seq(1:10)),
labels = 10^(log10(seq(1:10))))+
theme_bw()+
theme(
panel.border= element_blank(),
axis.text.y = element_text(face="bold", colour="black", size=10),
axis.text.x = element_text(colour="black", face="bold", size=10),
axis.title.y = element_text(face="bold", colour="black", size=11),
axis.title.x = element_text(face="bold", colour="black", size=11),
axis.line.y = element_line(color="black", size = 0.5),
axis.line.x = element_line(color="black", size = 0.5),
plot.title = element_text(lineheight=.8, face="bold", hjust = 0.5),
panel.grid.major.y = element_line(color = 'grey', linetype = 'dotted'),
panel.grid.major.x = element_blank(),
panel.grid.minor = element_blank()
)
y1.dt.y2Pred
View(test)
y1.dt.y2Pred<- d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.log10_d.10k.today = `log10_d.10k.-7` + ((7*log10(2))/Dt_cases)) %>%
left_join(y2.obs, "country")
View(y1.dt.y2Pred)
test
d.10k.today.and.todayMinus7<- d.10k[which(d$date %in% c(today, today-7)), ]
y2.obs<- d.10k.today.and.todayMinus7[2,] %>%
gather('country', 'cases.10k.today', 2:ncol(.)) %>%
mutate(`obs.d.10k.today` = cases.10k.today) %>%
select(country, obs.d.10k.today)
y2.obs
d.10k.today.and.todayMinus7<- d.10k[which(d$date %in% c(today, today-7)), ]
d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
#mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.d.10k.today = `cases_d.10k.-7` + ((7*log10(2))/Dt_cases)) %>%
left_join(y2.obs, "country")
d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
#mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.d.10k.today = `cases.d.10k.-7` + ((7*log10(2))/Dt_cases)) %>%
left_join(y2.obs, "country")
d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.d.10k.-7', 2:ncol(.)) %>%
#mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.d.10k.today = `cases.d.10k.-7` + ((7*log10(2))/Dt_cases)) %>%
left_join(y2.obs, "country")
d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.d.10k.-7', 2:ncol(.)) %>%
#mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.d.10k.today = `cases.d.10k.-7` + ((7*log10(2))/Dt_cases)) %>%
left_join(y2.obs, "country")
d.10k.today.and.todayMinus7<- d.10k[which(d$date %in% c(today, today-7)), ]
y2.obs<- d.10k.today.and.todayMinus7[2,] %>%
gather('country', 'cases.10k.today', 2:ncol(.)) %>%
mutate(`obs.log10_d.10k.today` = log10(cases.10k.today)) %>%
select(country, obs.log10_d.10k.today)
y1.dt.y2Pred<- d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.log10_d.10k.today = `log10_d.10k.-7` + ((7*log10(2))/Dt_cases)) %>%
#left_join(y2.obs, "country")
select(country, `log10_d.10k.-7`, pred.log10_d.10k.today) %>%
gather('time','y1.or.y2', 2:3) %>%
spread(country, y1.or.y2) %>%
mutate(time = ifelse(time == 'log10_d.10k.-7', as.character(today - 7), as.character(today))) %>%
rename(date = time)
d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.log10_d.10k.today = `log10_d.10k.-7` + ((7*log10(2))/Dt_cases)) %>%
left_join(y2.obs, "country")
d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.log10_d.10k.today = `log10_d.10k.-7` + ((7*log10(2))/Dt_cases)) %>%
#left_join(y2.obs, "country")
muatate(`d.10k.-7` = 10^(`log10_d.10k.-7`), # back to linear scale, per 10k
pred.d.10k.today = 10^(pred.log10_d.10k.today))
select(country, `d.10k.-7`, pred.d.10k.today) %>%
gather('time','y1.or.y2', 2:3) %>%
spread(country, y1.or.y2) %>%
mutate(time = ifelse(time == 'd.10k.-7', as.character(today - 7), as.character(today))) %>%
rename(date = time)
y1.dt.y2Pred<- d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.log10_d.10k.today = `log10_d.10k.-7` + ((7*log10(2))/Dt_cases)) %>%
#left_join(y2.obs, "country")
muatate(`d.10k.-7` = 10^(`log10_d.10k.-7`), # back to linear scale, per 10k
pred.d.10k.today = 10^(pred.log10_d.10k.today)) %>%
select(country, `d.10k.-7`, pred.d.10k.today) %>%
gather('time','y1.or.y2', 2:3) %>%
spread(country, y1.or.y2) %>%
mutate(time = ifelse(time == 'd.10k.-7', as.character(today - 7), as.character(today))) %>%
rename(date = time)
y1.dt.y2Pred<- d.10k.today.and.todayMinus7[1,] %>%
gather('country', 'cases.10k.-7', 2:ncol(.)) %>%
mutate(`log10_d.10k.-7` = log10(`cases.10k.-7`)) %>%
left_join(who_dt_data, 'country') %>%
mutate(pred.log10_d.10k.today = `log10_d.10k.-7` + ((7*log10(2))/Dt_cases)) %>%
#left_join(y2.obs, "country")
mutate(`d.10k.-7` = 10^(`log10_d.10k.-7`), # back to linear scale, per 10k
pred.d.10k.today = 10^(pred.log10_d.10k.today)) %>%
select(country, `d.10k.-7`, pred.d.10k.today) %>%
gather('time','y1.or.y2', 2:3) %>%
spread(country, y1.or.y2) %>%
mutate(time = ifelse(time == 'd.10k.-7', as.character(today - 7), as.character(today))) %>%
rename(date = time)
View(y1.dt.y2Pred)
y1.dt.y2Pred %>%
gather('country', 'n', 2:ncol(.))
test<- y1.dt.y2Pred %>%
gather('country', 'n', 2:ncol(.)) %>%
group_by(country) %>%
mutate(log10increase.7days = log10(n/n[1])),
increase.7days = n/n[1])
test<- y1.dt.y2Pred %>%
gather('country', 'n', 2:ncol(.)) %>%
group_by(country) %>%
mutate(log10increase.7days = log10(n/n[1]))
ggplot(test, aes(x = as.factor(date), y = log10increase.7days, group = country))+
geom_line(col = 'grey') + ggtitle('Angola')+
geom_line(data = test[test$country == 'Angola',], size = 1.5)+
geom_point(data = test[test$country == 'Angola',], size = 1.8)+
ylab('Log10 increase over the past 7 days\n')+ xlab('')+
scale_y_continuous(breaks = log10(seq(1:10)),
labels = 10^(log10(seq(1:10))))+
theme_bw()+
theme(
panel.border= element_blank(),
axis.text.y = element_text(face="bold", colour="black", size=10),
axis.text.x = element_text(colour="black", face="bold", size=10),
axis.title.y = element_text(face="bold", colour="black", size=11),
axis.title.x = element_text(face="bold", colour="black", size=11),
axis.line.y = element_line(color="black", size = 0.5),
axis.line.x = element_line(color="black", size = 0.5),
plot.title = element_text(lineheight=.8, face="bold", hjust = 0.5),
panel.grid.major.y = element_line(color = 'grey', linetype = 'dotted'),
panel.grid.major.x = element_blank(),
panel.grid.minor = element_blank()
)
test
test %>%
select(date, country, log10increase.7days) %>%
spread(country, log10increase.7days)
test.for.basegraphic<- test %>%
select(date, country, log10increase.7days) %>%
spread(country, log10increase.7days)
range(test.for.basegraphic[,-1])
range(test.for.basegraphic[,-1], na.rm = TRUE)
which(test.for.basegraphic == 'Inf')
View(test.for.basegraphic)
test.for.basegraphic[which(test.for.basegraphic == 'Inf')] <- NaN
yseq.dtplot.cases<- range(test.for.basegraphic[,-1], na.rm = TRUE)
yseq.dtplot.cases
test.for.basegraphic[,-1]
test.for.basegraphic<- test %>%
select(date, country, log10increase.7days) %>%
spread(country, log10increase.7days) %>%
as.data.frame()
test.for.basegraphic[which(test.for.basegraphic == 'Inf')]
test.for.basegraphic
which(test.for.basegraphic == 'Inf')
test.for.basegraphic[which(test.for.basegraphic == 'Inf')]
test %>%
select(date, country, log10increase.7days)
test.for.basegraphic<- test %>%
select(date, country, log10increase.7days)
test.for.basegraphic<- test %>%
select(date, country, log10increase.7days) %>%
test.for.basegraphic$log10increase.7days[which(!is.finite(log10increase.7days))]
test.for.basegraphic<- test %>%
select(date, country, log10increase.7days) %>%
test.for.basegraphic$log10increase.7days[which(!is.finite(test.for.basegraphic$log10increase.7days))]
test.for.basegraphic<- test %>%
select(date, country, log10increase.7days)
test.for.basegraphic
is.finite(test.for.basegraphic$log10increase.7days)
which(!is.finite(test.for.basegraphic$log10increase.7days))
test.for.basegraphic$log10increase.7days[which(!is.finite(test.for.basegraphic$log10increase.7days))]<- NA
test.for.basegraphic
test.for.basegraphic<- test.for.basegraphic %>%
spread(country, log10increase.7days) %>%
as.data.frame()
test.for.basegraphic
yseq.dtplot.cases<- range(test.for.basegraphic[,-1], na.rm = TRUE)
yseq.dtplot.cases
test.for.basegraphic$date
plot('', xlim = test.for.basegraphic$date, ylim = range(yseq.dtplot.cases), xaxt = 'n', yaxt = 'n', xlab = '', ylab = '')
xseq.dtplot.cases<- as.factor(test.for.basegraphic$date)
xseq.dtplot.cases
yseq.dtplot.cases<- c(0, max(test.for.basegraphic[,-1], na.rm = TRUE), length.out = 5)
xseq.dtplot.cases<- as.factor(test.for.basegraphic$date)
yseq.dtplot.cases
yseq.dtplot.cases<- seq(0, max(test.for.basegraphic[,-1], na.rm = TRUE), length.out = 5)
yseq.dtplot.cases
c
o
plot('', xlim = range(xseq.dtplot.cases), ylim = range(yseq.dtplot.cases), xaxt = 'n', yaxt = 'n', xlab = '', ylab = '')
plot('', xlim = xseq.dtplot.cases, ylim = range(yseq.dtplot.cases), xaxt = 'n', yaxt = 'n', xlab = '', ylab = '')
plot('', xlim = c(1,2), ylim = range(yseq.dtplot.cases), xaxt = 'n', yaxt = 'n', xlab = '', ylab = '')
axis(1, at = xseq.dtplot.cases, labels = format(xseq.dtplot.cases, date.format), font = x.font.fbc, cex.axis = x.cex.fbc)
x.font.fbc = 2
x.cex.fbc = 1.2
axis(1, at = xseq.dtplot.cases, labels = format(xseq.dtplot.cases, date.format), font = x.font.fbc, cex.axis = x.cex.fbc)
date.format = "%d/%m"
axis(1, at = xseq.dtplot.cases, labels = format(xseq.dtplot.cases, date.format), font = x.font.fbc, cex.axis = x.cex.fbc)
test.for.basegraphic
plot(Algeria ~ as.factor(date), data = test.for.basegraphic, type = 'l')
plot(Algeria ~ date, data = test.for.basegraphic, type = 'l')
plot(Algeria ~ as.numeric(date), data = test.for.basegraphic, type = 'l')
plot(Algeria ~ c(1,2), data = test.for.basegraphic, type = 'l')
plot(Algeria ~ c(1,2), data = test.for.basegraphic, type = 'l', xlim = c(0,3))
plot(Algeria ~ c(1,2), data = test.for.basegraphic, type = 'l', xlim = c(0.5,2.5))
for(c2 in 2:ncol(test.for.basegraphic)){
lines(test.for.basegraphic[,c2] ~ c(1,2), lwd = 1.5, col = 'grey')
}
c  = 2
lines(test.for.basegraphic[,c] ~ c(1,2), lwd = 3)
points(test.for.basegraphic[,c] ~ c(1,2), cex = 2)
points(test.for.basegraphic[,c] ~ c(1,2), cex = 1.2, pch = 16)
plot(Algeria ~ c(1,2), data = test.for.basegraphic, type = 'l', xlim = c(0.5,2.5))
for(c2 in 2:ncol(test.for.basegraphic)){
lines(test.for.basegraphic[,c2] ~ c(1,2), lwd = 1.5, col = 'grey')
}
lines(test.for.basegraphic[,c] ~ c(1,2), lwd = 3)
points(test.for.basegraphic[,c] ~ c(1,2), cex = 1.2, pch = 16)
test.for.basegraphic
test.for.basegraphic[2,-1]
which.max(test.for.basegraphic[2,-1])
max.increase.country<- names(which.max(test.for.basegraphic[2,-1]))
max.increase.country
plot(test.for.basegraphic[,max.increase.country] ~ c(1,2), data = test.for.basegraphic, type = 'l', xlim = c(0.5,2.5))
for(c2 in 2:ncol(test.for.basegraphic)){
lines(test.for.basegraphic[,c2] ~ c(1,2), lwd = 1.5, col = 'grey')
}
lines(test.for.basegraphic[,c] ~ c(1,2), lwd = 3)
points(test.for.basegraphic[,c] ~ c(1,2), cex = 1.2, pch = 16)
log10(seq(1:10))
axis(2, at = log10(seq(1:10)), labels = 10^(log10(seq(1:10))), font = x.font.fbc, cex.axis = x.cex.fbc)
test.for.basegraphic$date
axis(1, at = c(1,2), labels = test.for.basegraphic$date, font = y.font.fbc, cex.axis = y.cex.fbc)
# PARAMETERS FIGURE BY COUNTRY  (bc)----
x.font.fbc = 2
y.font.fbc = 2
x.cex.fbc = 1.2
y.cex.fbc = 1.2
ylab.cex.fbc = 1.2
ylab.f.fbc = 2
ylab.line.fbc = 1
xTOPlab.cex.fbc = 1.2
xTOPlab.f.fbc = 2
xTOPlab.line.fbc = 0
xBOTTOMlab.cex.fbc = 1.2
xBOTTOMlab.f.fbc = 2
xBOTTOMlab.line.fbc = 1
start.date.fbc = as.Date("2020-03-08") # forced starting date for x-axis in fig1
x.axti.fbc = 5
y.axti.fbc.rawCases = 100
y.axti.fbc.rawDeaths = 5
y.axti.fbc.logCases = 1
y.axti.fbc.logDeaths = 1
xseq.fbc = seq.Date(from = min(d$date), to = max(d$date), by = x.axti.fbc)
# y-scale for raw cases
thirdWorst<- rev(sort(tail(d, 1)[,-1]))[[3]]
thirdWorstPadded<- round_any(thirdWorst, 100)
yseq.raw.cases = seq(0, thirdWorstPadded, y.axti.fbc.rawCases)
# y-scale for raw deaths
secondworstDeaths<- rev(sort(tail(d.deaths,1)[,-1]))[[2]]
secondworstDeathsPadded<- secondworstDeaths+1 #round_any(worstDeaths, 10, f = ceiling)
yseq.raw.deaths = seq(0, secondworstDeathsPadded, y.axti.fbc.rawDeaths)
# y-scale for log 10k cases
yseq.log.cases<- seq(round_any(range(d.10k.log[,2:ncol(d.10k.log)], na.rm = TRUE)[1], 1, f = floor),
round_any(range(d.10k.log[,2:ncol(d.10k.log)], na.rm = TRUE)[2], 1, f = ceiling),
y.axti.fbc.logCases)
# y-scale for log 10k deaths
yseq.log.deaths<- seq(round_any(range(d.deaths.10k.log[,2:ncol(d.deaths.10k.log)], na.rm = TRUE)[1], 1, f = floor),
round_any(range(d.deaths.10k.log[,2:ncol(d.deaths.10k.log)], na.rm = TRUE)[2], 1, f = ceiling),
y.axti.fbc.logDeaths)
max.increase.country<- names(which.max(test.for.basegraphic[2,-1]))
plot(test.for.basegraphic[,max.increase.country] ~ c(1,2), data = test.for.basegraphic, type = 'l', xlim = c(0.5,2.5))
for(c2 in 2:ncol(test.for.basegraphic)){
lines(test.for.basegraphic[,c2] ~ c(1,2), lwd = 1.5, col = 'grey')
}
lines(test.for.basegraphic[,c] ~ c(1,2), lwd = 3)
points(test.for.basegraphic[,c] ~ c(1,2), cex = 1.2, pch = 16)
axis(2, at = log10(seq(1:10)), labels = 10^(log10(seq(1:10))), font = y.font.fbc, cex.axis = y.cex.fbc)
axis(1, at = c(1,2), labels = test.for.basegraphic$date, font = x.font.fbc, cex.axis = x.cex.fbc)
abline(v = c(1,2), h = log10(seq(1:10)), col = 'lightgrey', lty = 'dotted')
max.increase.country<- names(which.max(test.for.basegraphic[2,-1]))
plot(test.for.basegraphic[,max.increase.country] ~ c(1,2), data = test.for.basegraphic,
type = 'l',
xlim = c(0.5,2.5),
xaxt = 'n', yaxt = 'n', xlab = '', ylab = '')
for(c2 in 2:ncol(test.for.basegraphic)){
lines(test.for.basegraphic[,c2] ~ c(1,2), lwd = 1.5, col = 'grey')
}
lines(test.for.basegraphic[,c] ~ c(1,2), lwd = 3)
points(test.for.basegraphic[,c] ~ c(1,2), cex = 1.2, pch = 16)
axis(2, at = log10(seq(1:10)), labels = 10^(log10(seq(1:10))), font = y.font.fbc, cex.axis = y.cex.fbc)
axis(1, at = c(1,2), labels = test.for.basegraphic$date, font = x.font.fbc, cex.axis = x.cex.fbc)
abline(v = c(1,2), h = log10(seq(1:10)), col = 'lightgrey', lty = 'dotted')
test.for.basegraphic
max.increase.country<- names(which.max(test.for.basegraphic[2,-1]))
plot(test.for.basegraphic[,max.increase.country] ~ c(1,2), data = test.for.basegraphic,
type = 'l',
xlim = c(0.5,2.5),
xaxt = 'n', yaxt = 'n', xlab = '', ylab = '')
for(c2 in 2:ncol(test.for.basegraphic)){
lines(test.for.basegraphic[,c2] ~ c(1,2), lwd = 1.5, col = 'grey')
}
c=2
lines(test.for.basegraphic[,c] ~ c(1,2), lwd = 3)
points(test.for.basegraphic[,c] ~ c(1,2), cex = 1.2, pch = 16)
axis(2, at = log10(seq(1:10)), labels = 10^(log10(seq(1:10))), font = y.font.fbc, cex.axis = y.cex.fbc)
axis(1, at = c(1,2), labels = test.for.basegraphic$date, font = x.font.fbc, cex.axis = x.cex.fbc)
abline(v = c(1,2), h = log10(seq(1:10)), col = 'lightgrey', lty = 'dotted')
